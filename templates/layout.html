{{define "layout"}}
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{if .Title}}{{.Title}} - {{end}}{{.AppName}}</title>
    <link rel="stylesheet" href="/static/css/style.css?v=20260108">
    <script>
        // åˆå§‹åŒ–ä¸»é¢˜
        (function() {
            var theme = localStorage.getItem('theme');
            if (theme) {
                document.documentElement.setAttribute('data-theme', theme);
            }
        })();
    </script>
</head>
<body>
    <div class="app">
        {{if .ShowNav}}
        <nav class="navbar">
            <div class="nav-brand">
                <a href="/">ğŸ¹ {{.AppName}}</a>
            </div>
            <div class="nav-links">
                <a href="/" class="{{if eq .ActiveNav "home"}}active{{end}}">é¦–é¡µ</a>
                <a href="/tags" class="{{if eq .ActiveNav "tags"}}active{{end}}">æ ‡ç­¾</a>
                <a href="/import" class="{{if eq .ActiveNav "import"}}active{{end}}">å¯¼å…¥</a>
                <a href="/bookmarklet" class="{{if eq .ActiveNav "bookmarklet"}}active{{end}}">å°ä¹¦ç­¾</a>
                <button class="theme-toggle" onclick="toggleTheme()" title="åˆ‡æ¢ä¸»é¢˜">ğŸŒ“</button>
                <a href="/logout" class="nav-logout">é€€å‡º</a>
            </div>
        </nav>
        {{end}}
        <main class="main-content">
            {{template "content" .}}
        </main>
    </div>
    <script src="/static/js/main.js?v=20260108"></script>
    <script>
        // ä¸»é¢˜åˆ‡æ¢
        function toggleTheme() {
            var html = document.documentElement;
            var current = html.getAttribute('data-theme');
            var next = current === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', next);
            localStorage.setItem('theme', next);
        }
    </script>
</body>
</html>
{{end}}
